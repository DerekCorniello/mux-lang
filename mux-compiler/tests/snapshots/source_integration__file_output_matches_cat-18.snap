---
source: mux-compiler/tests/source_integration.rs
expression: "format!(\"{:#?}\", expected)"
---
"// Comprehensive test for logical operators: !, &&, ||\n// Tests basic operations, precedence, short-circuit evaluation, and edge cases\n\nprintln(\"=== Testing NOT Operator (!) ===\")\n\n// Basic NOT\nbool t = true\nbool f = false\n\nbool not_true = !t\nbool not_false = !f\n\nif not_true {\n    println(\"✗ FAIL: !true should be false\")\n} else {\n    println(\"✓ !true = false\")\n}\n\nif not_false {\n    println(\"✓ !false = true\")\n} else {\n    println(\"✗ FAIL: !false should be true\")\n}\n\n// Double negation\nbool double_neg_true = !!t\nbool double_neg_false = !!f\n\nif double_neg_true {\n    println(\"✓ !!true = true\")\n} else {\n    println(\"✗ FAIL: !!true should be true\")\n}\n\nif double_neg_false {\n    println(\"✗ FAIL: !!false should be false\")\n} else {\n    println(\"✓ !!false = false\")\n}\n\n// NOT with literals\nif !true {\n    println(\"✗ FAIL: !true should be false\")\n} else {\n    println(\"✓ !true (literal) = false\")\n}\n\nif !false {\n    println(\"✓ !false (literal) = true\")\n} else {\n    println(\"✗ FAIL: !false should be true\")\n}\n\n// NOT with comparisons\nint x = 5\nint y = 10\n\nif !(x > y) {\n    println(\"✓ !(5 > 10) = true\")\n} else {\n    println(\"✗ FAIL: !(5 > 10) should be true\")\n}\n\nif !(x < y) {\n    println(\"✗ FAIL: !(5 < 10) should be false\")\n} else {\n    println(\"✓ !(5 < 10) = false\")\n}\n\nprintln(\"\")\nprintln(\"=== Testing AND Operator (&&) ===\")\n\n// Truth table for AND\nbool tt = true && true\nbool tf = true && false\nbool ft = false && true\nbool ff = false && false\n\nif tt {\n    println(\"✓ true && true = true\")\n} else {\n    println(\"✗ FAIL: true && true should be true\")\n}\n\nif tf {\n    println(\"✗ FAIL: true && false should be false\")\n} else {\n    println(\"✓ true && false = false\")\n}\n\nif ft {\n    println(\"✗ FAIL: false && true should be false\")\n} else {\n    println(\"✓ false && true = false\")\n}\n\nif ff {\n    println(\"✗ FAIL: false && false should be false\")\n} else {\n    println(\"✓ false && false = false\")\n}\n\n// AND with comparisons\nif (x < y) && (y > 0) {\n    println(\"✓ (5 < 10) && (10 > 0) = true\")\n} else {\n    println(\"✗ FAIL: (5 < 10) && (10 > 0) should be true\")\n}\n\nif (x > y) && (y > 0) {\n    println(\"✗ FAIL: (5 > 10) && (10 > 0) should be false\")\n} else {\n    println(\"✓ (5 > 10) && (10 > 0) = false\")\n}\n\n// Chained AND\nif true && true && true {\n    println(\"✓ true && true && true = true\")\n} else {\n    println(\"✗ FAIL: true && true && true should be true\")\n}\n\nif true && true && false {\n    println(\"✗ FAIL: true && true && false should be false\")\n} else {\n    println(\"✓ true && true && false = false\")\n}\n\nprintln(\"\")\nprintln(\"=== Testing OR Operator (||) ===\")\n\n// Truth table for OR\nbool or_tt = true || true\nbool or_tf = true || false\nbool or_ft = false || true\nbool or_ff = false || false\n\nif or_tt {\n    println(\"✓ true || true = true\")\n} else {\n    println(\"✗ FAIL: true || true should be true\")\n}\n\nif or_tf {\n    println(\"✓ true || false = true\")\n} else {\n    println(\"✗ FAIL: true || false should be true\")\n}\n\nif or_ft {\n    println(\"✓ false || true = true\")\n} else {\n    println(\"✗ FAIL: false || true should be true\")\n}\n\nif or_ff {\n    println(\"✗ FAIL: false || false should be false\")\n} else {\n    println(\"✓ false || false = false\")\n}\n\n// OR with comparisons\nif (x > y) || (y > 0) {\n    println(\"✓ (5 > 10) || (10 > 0) = true\")\n} else {\n    println(\"✗ FAIL: (5 > 10) || (10 > 0) should be true\")\n}\n\nif (x > y) || (y < 0) {\n    println(\"✗ FAIL: (5 > 10) || (10 < 0) should be false\")\n} else {\n    println(\"✓ (5 > 10) || (10 < 0) = false\")\n}\n\n// Chained OR\nif false || false || true {\n    println(\"✓ false || false || true = true\")\n} else {\n    println(\"✗ FAIL: false || false || true should be true\")\n}\n\nif false || false || false {\n    println(\"✗ FAIL: false || false || false should be false\")\n} else {\n    println(\"✓ false || false || false = false\")\n}\n\nprintln(\"\")\nprintln(\"=== Testing Short-Circuit Evaluation ===\")\n\n// Helper functions to test side effects\nfunc should_not_run_and() returns bool {\n    println(\"✗ ERROR: should_not_run_and() was called (short-circuit failed)\")\n    return true\n}\n\nfunc should_run_and() returns bool {\n    println(\"  should_run_and() called (expected)\")\n    return true\n}\n\nfunc should_not_run_or() returns bool {\n    println(\"✗ ERROR: should_not_run_or() was called (short-circuit failed)\")\n    return false\n}\n\nfunc should_run_or() returns bool {\n    println(\"  should_run_or() called (expected)\")\n    return false\n}\n\n// Test AND short-circuit: false && func() should NOT call func()\nprintln(\"Testing: false && should_not_run_and()\")\nbool and_sc1 = false && should_not_run_and()\nprintln(\"✓ Short-circuit AND: right side not evaluated when left is false\")\n\n// Test AND non-short-circuit: true && func() SHOULD call func()\nprintln(\"Testing: true && should_run_and()\")\nbool and_sc2 = true && should_run_and()\nprintln(\"✓ AND evaluates right side when left is true\")\n\n// Test OR short-circuit: true || func() should NOT call func()\nprintln(\"Testing: true || should_not_run_or()\")\nbool or_sc1 = true || should_not_run_or()\nprintln(\"✓ Short-circuit OR: right side not evaluated when left is true\")\n\n// Test OR non-short-circuit: false || func() SHOULD call func()\nprintln(\"Testing: false || should_run_or()\")\nbool or_sc2 = false || should_run_or()\nprintln(\"✓ OR evaluates right side when left is false\")\n\nprintln(\"\")\nprintln(\"=== Testing Mixed Operators and Precedence ===\")\n\n// NOT has higher precedence than AND\nbool a = true\nbool b = false\nbool c = true\n\n// !b && c should be (!b) && c = true && true = true\nif !b && c {\n    println(\"✓ !false && true = true (precedence: NOT before AND)\")\n} else {\n    println(\"✗ FAIL: !false && true should be true\")\n}\n\n// AND has higher precedence than OR\n// false || true && true should be false || (true && true) = false || true = true\nif false || true && true {\n    println(\"✓ false || true && true = true (precedence: AND before OR)\")\n} else {\n    println(\"✗ FAIL: false || true && true should be true\")\n}\n\n// Complex expression: !(a && b) || c\n// !(true && false) || true = !false || true = true || true = true\nif !(a && b) || c {\n    println(\"✓ !(true && false) || true = true\")\n} else {\n    println(\"✗ FAIL: !(true && false) || true should be true\")\n}\n\n// De Morgan's law: !(a && b) should equal (!a || !b)\nbool demorgan1 = !(a && b)\nbool demorgan2 = !a || !b\nif demorgan1 == demorgan2 {\n    println(\"✓ De Morgan's law: !(a && b) == (!a || !b)\")\n} else {\n    println(\"✗ FAIL: De Morgan's law failed\")\n}\n\n// De Morgan's law: !(a || b) should equal (!a && !b)\nbool demorgan3 = !(a || b)\nbool demorgan4 = !a && !b\nif demorgan3 == demorgan4 {\n    println(\"✓ De Morgan's law: !(a || b) == (!a && !b)\")\n} else {\n    println(\"✗ FAIL: De Morgan's law failed\")\n}\n\n// Complex nested expression\nbool complex = (a && !b) || (!a && b)\nif complex {\n    println(\"✓ (true && !false) || (!true && false) = true\")\n} else {\n    println(\"✗ FAIL: (true && !false) || (!true && false) should be true\")\n}\n\nprintln(\"\")\nprintln(\"=== Testing Logical Operators in Control Flow ===\")\n\n// In if conditions\nint result = 0\nif x < 10 && y > 5 {\n    result = 1\n}\nif result == 1 {\n    println(\"✓ Logical AND in if condition works\")\n} else {\n    println(\"✗ FAIL: Logical AND in if condition failed\")\n}\n\n// In while loops\nint counter = 0\nbool flag = true\nwhile counter < 3 && flag {\n    counter = counter + 1\n}\nif counter == 3 {\n    println(\"✓ Logical AND in while condition works\")\n} else {\n    println(\"✗ FAIL: Logical AND in while condition failed\")\n}\n\nprintln(\"\")\nprintln(\"=== All Logical Operator Tests Completed ===\")\n"
