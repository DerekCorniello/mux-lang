---
source: mux-compiler/tests/source_integration.rs
expression: "format!(\"{:#?}\", expected)"
---
"// Comprehensive Optional & Result Type Extraction Tests\n\nprintln(\"=== Testing Result<int, string> ===\")\n\n// Test 1: Result<int, string> with Ok\nfunc divide(int a, int b) returns Result<int, string> {\n    if b == 0 { return Err(\"Division by zero\") }\n    return Ok(a / b)\n}\n\nauto res1 = divide(10, 2)\nmatch res1 {\n    Ok(v) { println(\"✓ Result<int, string> Ok: \" + v.to_string()) }\n    Err(e) { println(\"✗ Unexpected error: \" + e) }\n}\n\n// Test 2: Result<int, string> with Err\nauto res2 = divide(10, 0)\nmatch res2 {\n    Ok(v) { println(\"✗ Unexpected success: \" + v.to_string()) }\n    Err(e) { println(\"✓ Result<int, string> Err: \" + e) }\n}\n\nprintln(\"\")\nprintln(\"=== Testing Optional<int> ===\")\n\n// Test 3: Optional<int> with Some\nfunc findEven(list<int> nums) returns Optional<int> {\n    for int n in nums { if n % 2 == 0 { return Some(n) } }\n    return None\n}\n\nauto opt1 = findEven([1, 3, 4, 7])\nmatch opt1 {\n    Some(n) { println(\"✓ Optional<int> Some: \" + n.to_string()) }\n    None { println(\"✗ Unexpected None\") }\n}\n\n// Test 4: Optional<int> with None\nauto opt2 = findEven([1, 3, 5, 7])\nmatch opt2 {\n    Some(n) { println(\"✗ Unexpected Some: \" + n.to_string()) }\n    None { println(\"✓ Optional<int> None\") }\n}\n\nprintln(\"\")\nprintln(\"=== Testing Result<string, string> ===\")\n\n// Test 5: Result<string, string> with Ok\nfunc validateInput(int code) returns Result<string, string> {\n    if code == 0 { return Err(\"Empty input\") }\n    return Ok(\"Valid input\")\n}\n\nauto res3 = validateInput(1)\nmatch res3 {\n    Ok(msg) { println(\"✓ Result<string, string> Ok: \" + msg) }\n    Err(e) { println(\"✗ Unexpected error: \" + e) }\n}\n\n// Test 6: Result<string, string> with Err  \nauto res4 = validateInput(0)\nmatch res4 {\n    Ok(msg) { println(\"✗ Unexpected success: \" + msg) }\n    Err(e) { println(\"✓ Result<string, string> Err: \" + e) }\n}\n\nprintln(\"\")\nprintln(\"=== Testing Optional<list<int>> ===\")\n\n// Test 7: Optional<list<int>> with Some\nfunc getNumbersIfPositive(int threshold) returns Optional<list<int>> {\n    if threshold <= 0 { return None }\n    return Some([1, 2, 3])\n}\n\nauto opt3 = getNumbersIfPositive(5)\nmatch opt3 {\n    Some(lst) { println(\"✓ Optional<list<int>> Some: list returned\") }\n    None { println(\"✗ Unexpected None\") }\n}\n\nprintln(\"\")\nprintln(\"=== Testing Result<list<string>, string> ===\")\n\n// Test 8: Result<list<string>, string> with Ok\nfunc getNames(int code) returns Result<list<string>, string> {\n    if code == 0 { return Err(\"Invalid request\") }\n    return Ok([\"Alice\", \"Bob\", \"Charlie\"])\n}\n\nauto res5 = getNames(1)\nmatch res5 {\n    Ok(names) { println(\"✓ Result<list<string>, string> Ok: list returned\") }\n    Err(e) { println(\"✗ Unexpected error: \" + e) }\n}\n\nprintln(\"\")\nprintln(\"=== All tests completed ===\")\n"
