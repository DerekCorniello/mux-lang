---
source: mux-compiler/tests/source_integration.rs
expression: "format!(\"{:#?}\", expected)"
---
"// Comprehensive test for enum variants with mixed types\n// Tests that enum field extraction handles different types correctly\n\nprint(\"=== Testing Basic Mixed Primitives ===\")\n\n// Test 1: Enum with different primitive types per variant\nenum Status { Active(string), Inactive(int), Pending(bool), Code(char) }\n\nauto status1 = Status.Active(\"running\")\nmatch status1 {\n    Active(msg) { print(\"✓ Status.Active(string): \" + msg) }\n    Inactive(code) { print(\"✗ Unexpected Inactive\") }\n    Pending(flag) { print(\"✗ Unexpected Pending\") }\n    Code(c) { print(\"✗ Unexpected Code\") }\n}\n\nauto status2 = Status.Inactive(42)\nmatch status2 {\n    Active(msg) { print(\"✗ Unexpected Active\") }\n    Inactive(code) { print(\"✓ Status.Inactive(int): \" + code.to_string()) }\n    Pending(flag) { print(\"✗ Unexpected Pending\") }\n    Code(c) { print(\"✗ Unexpected Code\") }\n}\n\nauto status3 = Status.Pending(true)\nmatch status3 {\n    Active(msg) { print(\"✗ Unexpected Active\") }\n    Inactive(code) { print(\"✗ Unexpected Inactive\") }\n    Pending(flag) { print(\"✓ Status.Pending(bool): \" + flag.to_string()) }\n    Code(c) { print(\"✗ Unexpected Code\") }\n}\n\nauto status4 = Status.Code('X')\nmatch status4 {\n    Active(msg) { print(\"✗ Unexpected Active\") }\n    Inactive(code) { print(\"✗ Unexpected Inactive\") }\n    Pending(flag) { print(\"✗ Unexpected Pending\") }\n    Code(c) { print(\"✓ Status.Code(char): extracted char value\") }\n}\n\nprint(\"\")\nprint(\"=== Testing Collections as Enum Fields ===\")\n\n// Test 2: Enum with collection types\nenum DataContainer { Names(list<string>), Scores(map<string, int>), Tags(set<string>) }\n\nauto data1 = DataContainer.Names([\"Alice\", \"Bob\", \"Charlie\"])\nmatch data1 {\n    Names(lst) { print(\"✓ DataContainer.Names(list<string>): extracted list\") }\n    Scores(m) { print(\"✗ Unexpected Scores\") }\n    Tags(s) { print(\"✗ Unexpected Tags\") }\n}\n\nauto scores_map = {\"Alice\": 100, \"Bob\": 85}\nauto data2 = DataContainer.Scores(scores_map)\nmatch data2 {\n    Names(lst) { print(\"✗ Unexpected Names\") }\n    Scores(m) { print(\"✓ DataContainer.Scores(map<string, int>): extracted map\") }\n    Tags(s) { print(\"✗ Unexpected Tags\") }\n}\n\nauto tags_set = {\"important\", \"urgent\"}  // Using set literal with strings\nauto data3 = DataContainer.Tags(tags_set)\nmatch data3 {\n    Names(lst) { print(\"✗ Unexpected Names\") }\n    Scores(m) { print(\"✗ Unexpected Scores\") }\n    Tags(s) { print(\"✓ DataContainer.Tags(set<string>): extracted set\") }\n}\n\nprint(\"\")\nprint(\"=== Testing Multiple Fields of Different Types ===\")\n\n// Test 3: Enum with variants having different numbers and types of fields\nenum ComplexVariant { Simple(string), Detailed(string, int, bool), Numeric(int, float) }\n\nauto var1 = ComplexVariant.Simple(\"just a message\")\nmatch var1 {\n    Simple(msg) { print(\"✓ ComplexVariant.Simple(string): \" + msg) }\n    Detailed(msg, code, flag) { print(\"✗ Unexpected Detailed\") }\n    Numeric(i, f) { print(\"✗ Unexpected Numeric\") }\n}\n\nauto var2 = ComplexVariant.Detailed(\"error occurred\", 404, false)\nmatch var2 {\n    Simple(msg) { print(\"✗ Unexpected Simple\") }\n    Detailed(msg, code, flag) { \n        print(\"✓ ComplexVariant.Detailed(string, int, bool):\")\n        print(\"  msg: \" + msg)\n        print(\"  code: \" + code.to_string())\n        print(\"  flag: \" + flag.to_string())\n    }\n    Numeric(i, f) { print(\"✗ Unexpected Numeric\") }\n}\n\nauto var3 = ComplexVariant.Numeric(123, 45.67)\nmatch var3 {\n    Simple(msg) { print(\"✗ Unexpected Simple\") }\n    Detailed(msg, code, flag) { print(\"✗ Unexpected Detailed\") }\n    Numeric(i, f) { \n        print(\"✓ ComplexVariant.Numeric(int, float):\")\n        print(\"  int: \" + i.to_string())\n        print(\"  float: \" + f.to_string())\n    }\n}\n\nprint(\"\")\nprint(\"=== Testing Type-Specific Operations ===\")\n\n// Test 4: Verify extracted values work correctly in operations\nenum Value { Text(string), Number(int) }\n\nauto val1 = Value.Text(\"Hello\")\nauto val2 = Value.Text(\" World\")\n\nmatch val1 {\n    Text(s1) {\n        match val2 {\n            Text(s2) { \n                auto combined = s1 + s2\n                print(\"✓ String concatenation: \" + combined)\n            }\n            Number(n) { print(\"✗ Unexpected Number\") }\n        }\n    }\n    Number(n) { print(\"✗ Unexpected Number\") }\n}\n\nauto val3 = Value.Number(10)\nauto val4 = Value.Number(32)\n\nmatch val3 {\n    Text(s) { print(\"✗ Unexpected Text\") }\n    Number(n1) {\n        match val4 {\n            Text(s) { print(\"✗ Unexpected Text\") }\n            Number(n2) {\n                auto sum = n1 + n2\n                print(\"✓ Integer arithmetic: \" + sum.to_string())\n            }\n        }\n    }\n}\n\nprint(\"\")\nprint(\"=== All Mixed-Type Enum Tests Completed ===\")\n"
