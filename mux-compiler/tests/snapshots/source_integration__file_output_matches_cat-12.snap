---
source: mux-compiler/tests/source_integration.rs
expression: "format!(\"{:#?}\", expected)"
---
"import utils.logger as _\n\nconst int MAX = 100\nauto flt = 7.82\nauto message = \"Mux Parser Test\"\n\nenum Shape { Circle(float radius), Rectangle(float width, float height), Square(float size) }\n\ninterface Drawable { func draw() returns void }\n\nclass Circle is Drawable, ShapeLike {\n    float radius\n    func draw() returns void { println(\"Circle radius=\" + self.radius.to_string()) }\n    func resize(float newRadius, string _) returns void { radius = newRadius }\n}\n\nclass Stack<T> {\n    list<T> items\n    func push(T item) returns void { items.push_back(item) }\n    func pop() returns Optional<T> {\n        if items.is_empty() { return None }\n        return items.pop_back()\n    }\n}\n\nfunc divide(int a, int b) returns Result<int, string> {\n    if b == 0 { return Err(\"Division by zero\") }\n    return Ok(a / b)\n}\nfunc findEven(list<int> nums) returns Optional<int> {\n    for int n in nums { if n % 2 == 0 { return Some(n) } }\n}\n\nfunc map<T, U>(list<T> items, func(T) returns U transform) returns list<U> {\n    list<U> out = []\n    for T item in items { out.push_back(transform(item)) }\n    return out\n}\n\nfunc main() returns void {\n    int explicit = 10\n    println(\"explicit: \" + explicit.to_string())\n    auto inferred = 42\n    println(\"inferred: \" + inferred.to_string())\n    auto floatVal = 9.4\n    println(\"floatVal: \" + floatVal.to_string())\n\n    if inferred > 40 { println(\"Big number\") } else { println(\"Small number\") }\n\n    auto maybeNum = Some(15)\n    println(\"maybeNum created\")\n    match maybeNum {\n        Some(v) if v > 10 { println(\"Large value: \" + v.to_string()) }\n        Some(v) { println(\"Small value: \" + v.to_string()) }\n        None { println(\"No value\") }\n        _ { println(\"Unexpected\") }\n    }\n\n    auto nums = [1, 2, 3]\n    println(\"nums: \" + nums.to_string())\n    auto c1 = Circle.new()\n    c1.radius = 2.0\n    println(\"c1.radius set to: \" + c1.radius.to_string())\n    auto c2 = Circle.new()\n    c2.radius = 3.5\n    println(\"c2.radius set to: \" + c2.radius.to_string())\n    auto cirs = [c1, c2]\n    println(\"cirs created with 2 circles\")\n    for Circle c in cirs { c.draw() }\n\n    auto stack = Stack<int>.new()\n    println(\"stack created\")\n    stack.push(99)\n    println(\"pushed 99 to stack\")\n    auto popped = stack.pop()\n    match popped {\n        Some(val) {\n            println(\"popped from stack: \" + popped)\n        }\n        None {\n            println(\"nothing popped\")\n        }\n    }\n\n    auto res = divide(10, 2)\n    println(\"divide(10, 2) result:\")\n    match res { Ok(v) { println(v.to_string()) } Err(e) { println(e) } }\n    match res {\n        Ok(v) {\n            println(\"got a good val\")\n        }\n        Err(e) {\n            println(\"got a bad val\")\n        }\n    }\n\n    auto maybeEven = findEven([1, 3, 4, 7])\n    println(\"findEven([1, 3, 4, 7]):\")\n    match maybeEven { Some(v) { println(v.to_string()) } None { println(\"None\") } }\n\n    auto square = func(int n) returns int { return n * n }\n    println(\"square function created\")\n    auto doubled = map([1, 2, 3], func(int x) returns int { return x * 2 })\n    println(\"doubled: \" + doubled.to_string())\n    auto squared = map([1, 2, 3], square)\n    println(\"squared: \" + squared.to_string())\n\n    int val = 10\n    println(\"val: \" + val.to_string())\n    auto p = &val\n    println(\"pointer p created\")\n    *p = 20\n    println(\"val after deref assignment: \" + val.to_string())\n    println(\"full_test passes\")\n}\n"
