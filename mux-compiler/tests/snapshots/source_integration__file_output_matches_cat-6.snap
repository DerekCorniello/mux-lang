---
source: mux-compiler/tests/source_integration.rs
expression: "format!(\"{:#?}\", expected)"
---
"// Test class method parameter passing\n// This tests that method parameters receive correct values (not garbage)\n\nclass Calculator {\n    int value\n    \n    func add(int amount) returns void {\n        print(\"Before add - value: \" + self.value.to_string())\n        print(\"Parameter amount received: \" + amount.to_string())\n        self.value = self.value + amount\n        print(\"After add - value: \" + self.value.to_string())\n    }\n    \n    func multiply(int factor) returns void {\n        print(\"Before multiply - value: \" + self.value.to_string())\n        print(\"Parameter factor received: \" + factor.to_string())\n        self.value = self.value * factor\n        print(\"After multiply - value: \" + self.value.to_string())\n    }\n    \n    func set(int new_value) returns int {\n        auto old_value = self.value\n        self.value = new_value\n        return old_value\n    }\n}\n\nclass FloatBox {\n    float value\n    \n    func update(float new_val) returns void {\n        print(\"FloatBox update parameter: \" + new_val.to_string())\n        self.value = new_val\n    }\n    \n    func multiply(float factor) returns float {\n        print(\"FloatBox multiply factor: \" + factor.to_string())\n        self.value = self.value * factor\n        return self.value\n    }\n}\n\nclass StringHolder {\n    string text\n    \n    func append(string suffix) returns void {\n        print(\"Appending: \" + suffix)\n        self.text = self.text + suffix\n    }\n    \n    func get() returns string {\n        return self.text\n    }\n}\n\nclass BoolToggle {\n    bool state\n    \n    func set_state(bool new_state) returns void {\n        print(\"Setting state to: \" + new_state.to_string())\n        self.state = new_state\n    }\n}\n\nclass MultiParam {\n    int a\n    int b\n    \n    func set_both(int first, int second) returns void {\n        print(\"Setting first=\" + first.to_string() + \" second=\" + second.to_string())\n        self.a = first\n        self.b = second\n    }\n    \n    func add_to_both(int amount) returns int {\n        print(\"Adding \" + amount.to_string() + \" to both\")\n        self.a = self.a + amount\n        self.b = self.b + amount\n        return self.a + self.b\n    }\n}\n\nfunc main() returns void {\n    print(\"=== Test 1: Calculator with int parameters ===\")\n    auto calc = Calculator.new()\n    calc.value = 10\n    print(\"Initial value set to: 10\")\n    print(\"\")\n    \n    print(\"Calling calc.add(5)...\")\n    calc.add(5)\n    print(\"Expected value: 15\")\n    print(\"Actual value: \" + calc.value.to_string())\n    print(\"\")\n    \n    print(\"Calling calc.multiply(2)...\")\n    calc.multiply(2)\n    print(\"Expected value: 30\")\n    print(\"Actual value: \" + calc.value.to_string())\n    print(\"\")\n    \n    print(\"Calling calc.set(100) (method with return value)...\")\n    auto old = calc.set(100)\n    print(\"Old value: \" + old.to_string() + \" (expected 30)\")\n    print(\"New value: \" + calc.value.to_string() + \" (expected 100)\")\n    print(\"\")\n    \n    print(\"=== Test 2: FloatBox with float parameters ===\")\n    auto fbox = FloatBox.new()\n    fbox.value = 3.5\n    print(\"Initial value: 3.5\")\n    fbox.update(7.25)\n    print(\"After update(7.25): \" + fbox.value.to_string() + \" (expected 7.25)\")\n    auto result = fbox.multiply(2.0)\n    print(\"After multiply(2.0): \" + result.to_string() + \" (expected 14.5)\")\n    print(\"\")\n    \n    print(\"=== Test 3: StringHolder with string parameters ===\")\n    auto holder = StringHolder.new()\n    holder.text = \"Hello\"\n    print(\"Initial text: \" + holder.text)\n    holder.append(\" World\")\n    print(\"After append(' World'): \" + holder.get() + \" (expected 'Hello World')\")\n    print(\"\")\n    \n    print(\"=== Test 4: BoolToggle with bool parameters ===\")\n    auto toggle = BoolToggle.new()\n    toggle.state = false\n    print(\"Initial state: \" + toggle.state.to_string())\n    toggle.set_state(true)\n    print(\"After set_state(true): \" + toggle.state.to_string() + \" (expected true)\")\n    print(\"\")\n    \n    print(\"=== Test 5: MultiParam with multiple parameters ===\")\n    auto multi = MultiParam.new()\n    multi.set_both(10, 20)\n    print(\"After set_both(10, 20): a=\" + multi.a.to_string() + \" b=\" + multi.b.to_string())\n    print(\"Expected: a=10 b=20\")\n    auto sum = multi.add_to_both(5)\n    print(\"After add_to_both(5): sum=\" + sum.to_string() + \" (expected 40)\")\n    print(\"Values: a=\" + multi.a.to_string() + \" b=\" + multi.b.to_string() + \" (expected a=15 b=25)\")\n    print(\"\")\n    \n    print(\"=== All tests completed ===\")\n}\n"
