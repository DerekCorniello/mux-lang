func my_map<T, U>(list<T> items, func(T) returns U transform) returns list<U> {
    list<U> out = []
    for T item in items { 
        auto transformed = transform(item)
        println("transformed ok")
        out.push_back(transformed)
        println("pushed")
        }
    return out
}

func int_map<int, int>(list<int> items, func(int) returns int transform) returns list<int> {
    list<int> out = []
    for int item in items { out.push_back(transform(item)) }
    return out
}

auto int_doubles = func(int x) returns int { return x * 2 }
auto int_my_list = [1, 2, 3]
auto int_doubled = int_map(int_my_list, int_doubles)
println("res: " + int_doubled.to_string())

auto doubles = func(int x) returns int { return x * 2 }
auto my_list = [1, 2, 3]
auto doubled = my_map(my_list, doubles)
println("res: " + doubled.to_string())
