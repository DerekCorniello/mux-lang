// Generics func
func max<T is Comparable>(T a, T b) returns T { 
    if a > b { 
        return a
    }
    return b 
}

func hello<T is Stringable>(T s) returns void {
    print("hello " + s.to_string())
}

func name<T is Stringable>(T s) returns string {
    return "hi im " + s.to_string()
}

class Stack<T> {
    list<T> items
    func push(T item) returns void { self.items.push_back(item) }
    func pop() returns Optional<T> {
        if self.items.is_empty() { return None }
        return self.items.pop_back()
    }
    common func who_am_i() returns string {
        return "im a stack!"
    }

    common func from(list<T> init_list) returns Stack<T> {
        auto new_stack = Stack<T>.new()
        print("init new obj")
        new_stack.items = init_list
        print("init items")
        return new_stack
    }
    func to_string() returns string {
        return "Stack with: " + self.items.to_string()
    }
}

auto s = Stack<int>.new()
s.push(42)
match s.pop() {
    Some(v) { print("Popped: " + v.to_string()) }
    None { print("Empty stack") }
}
print(Stack.who_am_i())
print("trying to instantiate stack")
auto test = Stack<int>.from([1,2,3])
print("instantiated stack")
print("stack has: " + test.items.to_string())
print(test.to_string())

print("max of 5 and 10 is: " + max(5, 10).to_string())
print("max of -1 and -2 is: " + max(-1, -2).to_string())
print(name("derek"))
print(name(123))
hello("derek")
hello(123)
print("generics ran successfully")
